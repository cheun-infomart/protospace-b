<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <header th:fragment="header">
      <nav class="header-nav">
        <div class="header-logo">
          <a th:href="@{/}"><img th:src="@{/images/Logo.png}" alt="Logo" /></a>
        </div>

        <!--検索フォーム-->
        <div class="header-form" id="header-form">
          <form th:action="@{/prototypes/search}" method="get" id="searchForm">
            <input type="text" name="keyword" placeholder="投稿を検索する" class="search-input" id="search-input" />
            <button type="submit" class="search-btn">
              <span class="material-icons-outlined">search</span>
            </button>
          </form>
        </div>

        <div class="header-menus">
          <div class="user_nav grid-6" th:if="${#authorization.expression('isAuthenticated()')}">
            <!-- アイコン追加 -->
            <a th:href="@{/users/{id}(id=${#authentication.principal.id})}">
              <img th:src="${#authentication.principal.image}" alt="user-icon" class="user-icon-mini" />
            </a>

            <form th:action="@{/logout}" method="post" style="display: inline-block">
              <a class="logout-btn" rel="nofollow" data-method="delete" href="/logout">ログアウト</a>
            </form>
            <a class="new_proto-post" th:href="@{/prototypes/new}">New Proto</a>
          </div>

          <div class="grid-6" th:if="${#authorization.expression('!isAuthenticated()')}">
            <a th:href="@{/users/login}" class="header-nav_btn">ログイン</a>
            <a th:href="@{/users/register}" class="header-nav_btn">新規登録</a>
          </div>
        </div>
      </nav>
    </header>
  </body>
</html>
